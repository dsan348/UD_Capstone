{"AWSTemplateFormatVersion":"2010-09-09","Description":"EKS nodes (AMI family: AmazonLinux2, SSH access: false, private networking: false) [created and managed by eksctl]","Resources":{"EgressInterCluster":{"Type":"AWS::EC2::SecurityGroupEgress","Properties":{"Description":"Allow control plane to communicate with worker nodes in group standard-workers (kubelet and workload TCP ports)","DestinationSecurityGroupId":{"Ref":"SG"},"FromPort":1025,"GroupId":{"Fn::ImportValue":"eksctl-finalproj-cluster::SecurityGroup"},"IpProtocol":"tcp","ToPort":65535}},"EgressInterClusterAPI":{"Type":"AWS::EC2::SecurityGroupEgress","Properties":{"Description":"Allow control plane to communicate with worker nodes in group standard-workers (workloads using HTTPS port, commonly used with extension API servers)","DestinationSecurityGroupId":{"Ref":"SG"},"FromPort":443,"GroupId":{"Fn::ImportValue":"eksctl-finalproj-cluster::SecurityGroup"},"IpProtocol":"tcp","ToPort":443}},"IngressInterCluster":{"Type":"AWS::EC2::SecurityGroupIngress","Properties":{"Description":"Allow worker nodes in group standard-workers to communicate with control plane (kubelet and workload TCP ports)","FromPort":1025,"GroupId":{"Ref":"SG"},"IpProtocol":"tcp","SourceSecurityGroupId":{"Fn::ImportValue":"eksctl-finalproj-cluster::SecurityGroup"},"ToPort":65535}},"IngressInterClusterAPI":{"Type":"AWS::EC2::SecurityGroupIngress","Properties":{"Description":"Allow worker nodes in group standard-workers to communicate with control plane (workloads using HTTPS port, commonly used with extension API servers)","FromPort":443,"GroupId":{"Ref":"SG"},"IpProtocol":"tcp","SourceSecurityGroupId":{"Fn::ImportValue":"eksctl-finalproj-cluster::SecurityGroup"},"ToPort":443}},"IngressInterClusterCP":{"Type":"AWS::EC2::SecurityGroupIngress","Properties":{"Description":"Allow control plane to receive API requests from worker nodes in group standard-workers","FromPort":443,"GroupId":{"Fn::ImportValue":"eksctl-finalproj-cluster::SecurityGroup"},"IpProtocol":"tcp","SourceSecurityGroupId":{"Ref":"SG"},"ToPort":443}},"NodeGroup":{"Type":"AWS::AutoScaling::AutoScalingGroup","Properties":{"DesiredCapacity":"3","LaunchTemplate":{"LaunchTemplateName":{"Fn::Sub":"${AWS::StackName}"},"Version":{"Fn::GetAtt":"NodeGroupLaunchTemplate.LatestVersionNumber"}},"MaxSize":"4","MinSize":"1","Tags":[{"Key":"Name","PropagateAtLaunch":"true","Value":"finalproj-standard-workers-Node"},{"Key":"kubernetes.io/cluster/finalproj","PropagateAtLaunch":"true","Value":"owned"}],"VPCZoneIdentifier":{"Fn::Split":[",",{"Fn::ImportValue":"eksctl-finalproj-cluster::SubnetsPublic"}]}},"UpdatePolicy":{"AutoScalingRollingUpdate":{"MaxBatchSize":"1","MinInstancesInService":"0"}}},"NodeGroupLaunchTemplate":{"Type":"AWS::EC2::LaunchTemplate","Properties":{"LaunchTemplateData":{"IamInstanceProfile":{"Arn":{"Fn::GetAtt":"NodeInstanceProfile.Arn"}},"ImageId":"ami-05d586e6f773f6abf","InstanceType":"t3.medium","NetworkInterfaces":[{"AssociatePublicIpAddress":true,"DeviceIndex":0,"Groups":[{"Fn::ImportValue":"eksctl-finalproj-cluster::SharedNodeSecurityGroup"},{"Ref":"SG"}]}],"UserData":"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"},"LaunchTemplateName":{"Fn::Sub":"${AWS::StackName}"}}},"NodeInstanceProfile":{"Type":"AWS::IAM::InstanceProfile","Properties":{"Path":"/","Roles":[{"Ref":"NodeInstanceRole"}]}},"NodeInstanceRole":{"Type":"AWS::IAM::Role","Properties":{"AssumeRolePolicyDocument":{"Statement":[{"Action":["sts:AssumeRole"],"Effect":"Allow","Principal":{"Service":["ec2.amazonaws.com"]}}],"Version":"2012-10-17"},"ManagedPolicyArns":["arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"],"Path":"/"}},"SG":{"Type":"AWS::EC2::SecurityGroup","Properties":{"GroupDescription":"Communication between the control plane and worker nodes in group standard-workers","Tags":[{"Key":"kubernetes.io/cluster/finalproj","Value":"owned"},{"Key":"Name","Value":{"Fn::Sub":"${AWS::StackName}/SG"}}],"VpcId":{"Fn::ImportValue":"eksctl-finalproj-cluster::VPC"}}}},"Outputs":{"FeatureLocalSecurityGroup":{"Value":true},"FeaturePrivateNetworking":{"Value":false},"FeatureSharedSecurityGroup":{"Value":true},"InstanceProfileARN":{"Export":{"Name":{"Fn::Sub":"${AWS::StackName}::InstanceProfileARN"}},"Value":{"Fn::GetAtt":"NodeInstanceProfile.Arn"}},"InstanceRoleARN":{"Export":{"Name":{"Fn::Sub":"${AWS::StackName}::InstanceRoleARN"}},"Value":{"Fn::GetAtt":"NodeInstanceRole.Arn"}}}}